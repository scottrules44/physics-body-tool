{"ast":null,"code":"var _jsxFileName = \"/Users/scottharrison/ownCloud/Desktop/cached projects/web-physic-body-editor/physics-body-tool/src/components/Editor.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useRef } from \"react\";\nimport \"../styles/Editor.css\";\nimport Dots from \"./Dots\";\nimport Selector from \"./Selector\";\nimport random from \"../modules/random\";\nimport BodyTest from \"./BodyTest\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function Editor() {\n  _s();\n\n  const [imageSelected, setImageSelected] = useState(false);\n  const [dots, editDots] = useState([]);\n  const [mode, setMode] = useState(\"place\");\n  const [imageRender, setImageRender] = useState(false);\n  const [baseImage, setBaseImage] = useState(null);\n  const [showWireframe, setWireframe] = useState(false);\n  const uploadImageRef = useRef(null);\n  const imagePreviewRef = useRef(null);\n  const importJsonRef = useRef(null);\n  const dotW = 10;\n\n  function dropHandler(ev) {\n    // Prevent default behavior (Prevent file from being opened)\n    ev.preventDefault();\n\n    if (ev.dataTransfer.items && ev.dataTransfer.items[0] && ev.dataTransfer.items[0].getAsFile()) {\n      setImageSelected(ev.dataTransfer.items[0].getAsFile());\n      ev.stopPropagation();\n    } else if (ev.dataTransfer.files && ev.dataTransfer.files[0]) {\n      setImageSelected(ev.dataTransfer.files[0]);\n      ev.stopPropagation();\n    }\n  }\n\n  function uploadImage(ev) {\n    if (uploadImageRef.current && uploadImageRef.current.files && uploadImageRef.current.files[0]) {\n      setImageSelected(uploadImageRef.current.files[0]);\n    }\n  }\n\n  function handleImageClick(e) {\n    var canvas = document.getElementById(\"editor_image\");\n\n    if (mode === \"place\" && canvas) {\n      const rect = canvas.getBoundingClientRect();\n      const elementRelativeX = e.clientX - rect.left;\n      const elementRelativeY = e.clientY - rect.top;\n      const canvasRelativeX = elementRelativeX * canvas.width / rect.width;\n      const canvasRelativeY = elementRelativeY * canvas.height / rect.height;\n      editDots([...dots, {\n        x: canvasRelativeX,\n        y: canvasRelativeY,\n        key: random(5),\n        width: dotW,\n        height: dotW\n      }]);\n    }\n\n    e.preventDefault();\n    e.stopPropagation();\n  }\n\n  function onDragEndHandler(ev) {\n    ev.preventDefault();\n  }\n\n  function onDragEnterHandler(ev) {\n    ev.preventDefault();\n  }\n\n  function handleDragOver(ev) {\n    ev.preventDefault();\n    ev.stopPropagation();\n  }\n\n  ;\n\n  function loadImage(tempImage) {\n    var canvas = document.getElementById(\"editor_image\");\n    var context = canvas.getContext('2d');\n\n    if (tempImage) {\n      var scale = Math.min(canvas.width / tempImage.width, canvas.height / tempImage.height);\n      var x = canvas.width / 2 - tempImage.width / 2 * scale;\n      var y = canvas.height / 2 - tempImage.height / 2 * scale;\n      context.drawImage(tempImage, x, y, tempImage.width * scale, tempImage.height * scale);\n      setBaseImage(tempImage);\n    }\n  }\n\n  function reload() {\n    var canvas = document.getElementById(\"editor_image\");\n\n    if (canvas) {\n      var context = canvas.getContext('2d');\n      context.clearRect(0, 0, canvas.width, canvas.height);\n      loadImage(baseImage);\n    }\n  }\n\n  function filterXY(data) {\n    var newData = [];\n    data.forEach(e => {\n      newData.push({\n        x: e.x,\n        y: e.y\n      });\n    });\n    return newData;\n  }\n\n  function convertXYToNum(data) {\n    var newData = [];\n\n    if (baseImage != null) {\n      var width = baseImage.naturalWidth;\n      var height = baseImage.naturalHeight;\n      data.forEach(e => {\n        newData.push({\n          x: e.x / width,\n          y: e.y / height\n        });\n      });\n      return {\n        polygons: newData,\n        imageSize: {\n          width: width,\n          height: height\n        }\n      };\n    }\n  }\n\n  function clearImage() {\n    setImageSelected(false);\n    setBaseImage(null);\n    editDots([]);\n    setMode(\"place\");\n  }\n\n  function importDots(ev) {\n    if (importJsonRef.current && importJsonRef.current.files && importJsonRef.current.files[0]) {\n      var reader = new FileReader();\n\n      reader.onload = function () {\n        var fileContent = JSON.parse(reader.result);\n        var width = fileContent.imageSize.width;\n        var height = fileContent.imageSize.height;\n        var data = fileContent.polygons;\n        var newData = [];\n        data.forEach(e => {\n          newData.push({\n            x: e.x * width,\n            y: e.y * height,\n            key: random(5),\n            width: dotW,\n            height: dotW\n          });\n        });\n        editDots(newData);\n        reload();\n        importJsonRef.current.value = '';\n        ;\n      };\n\n      reader.readAsText(importJsonRef.current.files[0]);\n    }\n  }\n\n  React.useEffect(() => {\n    var canvas = document.getElementById(\"editor_image\");\n\n    if (imageSelected && imageRender == false && canvas) {\n      var context = canvas.getContext('2d');\n      var tempImage;\n\n      if (baseImage == null) {\n        tempImage = new Image();\n\n        tempImage.onload = function () {\n          loadImage(tempImage);\n        };\n\n        tempImage.src = URL.createObjectURL(imageSelected);\n        setBaseImage(tempImage);\n      } else {\n        tempImage = baseImage;\n        loadImage(tempImage);\n      }\n    }\n  }, [imageSelected, imageRender, setImageRender]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: (() => {\n      if (imageSelected) {\n        return /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(Selector, {\n            mode: mode,\n            changeMode: m => setMode(m)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 165,\n            columnNumber: 23\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              display: mode == \"test\" ? \"block\" : \"none\"\n            },\n            children: [/*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"checkbox\",\n              id: \"wireframe\",\n              name: \"wireframe\",\n              value: \"wireframe\",\n              onClick: () => setWireframe(!showWireframe),\n              checked: showWireframe\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 167,\n              columnNumber: 25\n            }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n              for: \"wireframe\",\n              children: \"Show Wireframe\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 168,\n              columnNumber: 25\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 166,\n            columnNumber: 23\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            id: \"editor\",\n            onDragOver: e => {\n              e.stopPropagation();\n              e.preventDefault();\n            },\n            children: [/*#__PURE__*/_jsxDEV(\"canvas\", {\n              id: \"canvas_test\",\n              style: {\n                display: \"none\"\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 174,\n              columnNumber: 25\n            }, this), /*#__PURE__*/_jsxDEV(BodyTest, {\n              mode: mode,\n              image: imageSelected,\n              dots: filterXY(dots),\n              baseImage: baseImage,\n              wireframe: showWireframe\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 175,\n              columnNumber: 25\n            }, this), /*#__PURE__*/_jsxDEV(Dots, {\n              data: dots,\n              mode: mode,\n              updateData: d => editDots(d),\n              reload: () => reload()\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 176,\n              columnNumber: 25\n            }, this), /*#__PURE__*/_jsxDEV(\"canvas\", {\n              width: 400,\n              height: 400,\n              id: \"editor_image\",\n              className: \"editor_image\",\n              draggable: false,\n              onDragStart: e => {\n                e.preventDefault();\n                return false;\n              },\n              className: \"editor_image\",\n              ref: imagePreviewRef,\n              onClick: handleImageClick\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 177,\n              columnNumber: 25\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 170,\n            columnNumber: 23\n          }, this), dots && dots.length <= 0 ? /*#__PURE__*/_jsxDEV(\"h5\", {\n            children: \"Click anywhere on image to place connecting dots\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 179,\n            columnNumber: 50\n          }, this) : undefined, /*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(\"p\", {\n              children: /*#__PURE__*/_jsxDEV(\"a\", {\n                href: 'data:text/plain;charset=utf-8,' + encodeURIComponent(JSON.stringify(convertXYToNum(filterXY(dots)))),\n                download: \"data.json\",\n                children: /*#__PURE__*/_jsxDEV(\"input\", {\n                  type: \"button\",\n                  value: \"export json\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 182,\n                  columnNumber: 27\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 181,\n                columnNumber: 28\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 181,\n              columnNumber: 25\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              children: [/*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"button\",\n                value: \"start over\",\n                onClick: clearImage\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 184,\n                columnNumber: 28\n              }, this), \" \"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 184,\n              columnNumber: 25\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              children: [\"Import Dots: \", /*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"file\",\n                ref: importJsonRef,\n                style: {\n                  width: 180\n                },\n                id: \"importJSON\",\n                name: \"import\",\n                accept: \"application/json\",\n                onChange: importDots\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 185,\n                columnNumber: 41\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 185,\n              columnNumber: 25\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 180,\n            columnNumber: 23\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 164,\n          columnNumber: 21\n        }, this);\n      } else {\n        return /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"drop_zone\",\n          onDrop: dropHandler,\n          onDragEnd: onDragEndHandler,\n          onDragEnter: onDragEnterHandler,\n          onDragOver: e => handleDragOver(e),\n          children: [/*#__PURE__*/_jsxDEV(\"p\", {\n            children: \"Select or drag in an Image (pngs only)\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 191,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"file\",\n            ref: uploadImageRef,\n            style: {\n              width: 180\n            },\n            id: \"uploadImage\",\n            name: \"import\",\n            accept: \"image/png\",\n            onChange: uploadImage\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 192,\n            columnNumber: 29\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 190,\n          columnNumber: 26\n        }, this);\n      }\n    })()\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 160,\n    columnNumber: 9\n  }, this);\n}\n\n_s(Editor, \"LqsTtcEf+PhkcMhCYQuzItI/LkY=\");\n\n_c = Editor;\n\nvar _c;\n\n$RefreshReg$(_c, \"Editor\");","map":{"version":3,"names":["React","useState","useRef","Dots","Selector","random","BodyTest","Editor","imageSelected","setImageSelected","dots","editDots","mode","setMode","imageRender","setImageRender","baseImage","setBaseImage","showWireframe","setWireframe","uploadImageRef","imagePreviewRef","importJsonRef","dotW","dropHandler","ev","preventDefault","dataTransfer","items","getAsFile","stopPropagation","files","uploadImage","current","handleImageClick","e","canvas","document","getElementById","rect","getBoundingClientRect","elementRelativeX","clientX","left","elementRelativeY","clientY","top","canvasRelativeX","width","canvasRelativeY","height","x","y","key","onDragEndHandler","onDragEnterHandler","handleDragOver","loadImage","tempImage","context","getContext","scale","Math","min","drawImage","reload","clearRect","filterXY","data","newData","forEach","push","convertXYToNum","naturalWidth","naturalHeight","polygons","imageSize","clearImage","importDots","reader","FileReader","onload","fileContent","JSON","parse","result","value","readAsText","useEffect","Image","src","URL","createObjectURL","m","display","d","length","undefined","encodeURIComponent","stringify"],"sources":["/Users/scottharrison/ownCloud/Desktop/cached projects/web-physic-body-editor/physics-body-tool/src/components/Editor.js"],"sourcesContent":["import React, {useState, useRef} from \"react\";\nimport \"../styles/Editor.css\"\nimport Dots from \"./Dots\";\nimport Selector from \"./Selector\";\nimport random from \"../modules/random\";\nimport BodyTest from \"./BodyTest\";\nexport default function Editor(){\n    const [imageSelected, setImageSelected] = useState(false);\n    const [dots, editDots] = useState([]);\n    const [mode, setMode] = useState(\"place\");\n    const [imageRender, setImageRender] = useState(false);\n    const [baseImage, setBaseImage] = useState(null);\n    const [showWireframe, setWireframe] = useState(false);\n    const uploadImageRef = useRef(null);\n    const imagePreviewRef = useRef(null);\n    const importJsonRef = useRef(null);\n    const dotW = 10;\n    \n\n    function dropHandler(ev) {\n      // Prevent default behavior (Prevent file from being opened)\n      ev.preventDefault();\n      \n      if (ev.dataTransfer.items && ev.dataTransfer.items[0] && ev.dataTransfer.items[0].getAsFile() ) {\n        setImageSelected(ev.dataTransfer.items[0].getAsFile());\n        ev.stopPropagation();\n      } else if(ev.dataTransfer.files && ev.dataTransfer.files[0]) {\n        setImageSelected(ev.dataTransfer.files[0]);\n        ev.stopPropagation();\n      }\n    }\n    function uploadImage(ev){\n      if(uploadImageRef.current && uploadImageRef.current.files && uploadImageRef.current.files[0] ){\n        setImageSelected(uploadImageRef.current.files[0]);\n      }\n    }\n    function handleImageClick(e){\n      var canvas = document.getElementById(\"editor_image\");\n      if(mode === \"place\" && canvas){\n        \n        const rect = canvas.getBoundingClientRect();\n        const elementRelativeX = e.clientX - rect.left;\n        const elementRelativeY = e.clientY - rect.top;\n        const canvasRelativeX = elementRelativeX * canvas.width / rect.width;\n        const canvasRelativeY = elementRelativeY * canvas.height / rect.height;\n        \n        editDots([...dots, {x: canvasRelativeX, y:canvasRelativeY, key:random(5), width:dotW, height:dotW}]);\n      }\n      e.preventDefault();\n      e.stopPropagation();\n    }\n    function onDragEndHandler(ev) {\n      \n      ev.preventDefault();\n    }\n    function onDragEnterHandler(ev) {\n      \n      ev.preventDefault();\n    }\n    function handleDragOver(ev) {\n      ev.preventDefault();\n      ev.stopPropagation();\n    };\n\n    function loadImage(tempImage){\n      \n      var canvas = document.getElementById(\"editor_image\");\n      var context = canvas.getContext('2d');\n      if(tempImage){\n        \n        var scale = Math.min(canvas.width / tempImage.width, canvas.height / tempImage.height);\n        \n        var x = (canvas.width / 2) - (tempImage.width / 2) * scale;\n        var y = (canvas.height / 2) - (tempImage.height / 2) * scale;\n        context.drawImage(tempImage, x, y, tempImage.width * scale, tempImage.height * scale);\n        setBaseImage(tempImage)\n      }\n      \n    }\n    function reload(){\n      var canvas = document.getElementById(\"editor_image\");\n      if(canvas){\n        var context = canvas.getContext('2d');\n        context.clearRect(0, 0, canvas.width, canvas.height);\n        loadImage(baseImage);\n      }\n    }\n    function filterXY(data){\n      var newData = [];\n      \n      data.forEach( e => {\n        newData.push({x:e.x, y:e.y})\n      });\n      return newData;\n    }\n    function convertXYToNum(data){\n      var newData = [];\n      if(baseImage != null){\n        var width  = baseImage.naturalWidth;\n        var height = baseImage.naturalHeight;\n        data.forEach( e => {\n          newData.push({x:e.x/width, y:e.y/height})\n        });\n        return {polygons:newData, imageSize:{width:width, height:height}};\n      }\n    }\n\n    function clearImage(){\n      setImageSelected(false);\n      setBaseImage(null);\n      editDots([]);\n      setMode(\"place\");\n    }\n    \n    function importDots (ev){\n      if(importJsonRef.current && importJsonRef.current.files && importJsonRef.current.files[0] ){\n        var reader = new FileReader();\n        reader.onload = function() {\n          var fileContent = JSON.parse(reader.result);\n          var width  = fileContent.imageSize.width;\n          var height = fileContent.imageSize.height;\n          var data = fileContent.polygons;\n          var newData = [];\n          data.forEach( e => {\n            newData.push({x:e.x*width, y:e.y*height, key:random(5), width:dotW, height:dotW})\n          });\n          editDots(newData);\n          reload();\n          importJsonRef.current.value = ''; ;\n        };\n        reader.readAsText(importJsonRef.current.files[0]); \n      }\n    }\n       \n    React.useEffect(() => {\n      var canvas = document.getElementById(\"editor_image\");\n      \n      if(imageSelected && imageRender == false && canvas){\n        var context = canvas.getContext('2d');\n        var tempImage;\n        \n        if(baseImage == null){\n          tempImage = new Image();\n          tempImage.onload = function(){   \n            loadImage(tempImage);\n          };\n          tempImage.src = URL.createObjectURL(imageSelected);\n          setBaseImage(tempImage);\n        }else{\n          tempImage = baseImage;\n          loadImage(tempImage);\n        }\n        \n      }\n      \n    }, [imageSelected, imageRender, setImageRender]);\n   \n    \n    return (\n        <div>\n            { (() =>{\n                if(imageSelected){\n                  return(\n                    <div>\n                      <Selector mode={mode} changeMode={(m) => setMode(m)} />\n                      <div style={{display: mode==\"test\"? \"block\":\"none\"}} >\n                        <input type=\"checkbox\" id=\"wireframe\" name=\"wireframe\" value=\"wireframe\" onClick={() => setWireframe(!showWireframe)} checked={showWireframe} />\n                        <label for=\"wireframe\">Show Wireframe</label>\n                      </div>\n                      <div\n                      id=\"editor\"\n                      onDragOver={(e) => {e.stopPropagation();e.preventDefault();}}\n                      >\n                        <canvas id=\"canvas_test\" style={{display:\"none\"}} />\n                        <BodyTest mode={mode} image={imageSelected} dots={filterXY(dots)} baseImage={baseImage} wireframe={showWireframe} />\n                        <Dots data={dots} mode={mode} updateData={(d) => editDots(d)} reload={()=>reload()} />        \n                        <canvas width={400} height={400} id=\"editor_image\" className=\"editor_image\" draggable={false} onDragStart={(e) =>{e.preventDefault();return false;}} className=\"editor_image\" ref={imagePreviewRef} onClick={handleImageClick} />\n                      </div>\n                      {dots && dots.length <= 0 ?<h5>Click anywhere on image to place connecting dots</h5>: undefined}\n                      <div>\n                        <p><a href={'data:text/plain;charset=utf-8,' + encodeURIComponent(JSON.stringify(convertXYToNum(filterXY(dots))))} download=\"data.json\">\n                          <input type=\"button\" value=\"export json\" />\n                        </a></p>\n                        <p><input type=\"button\" value=\"start over\" onClick={clearImage} /> </p>\n                        <p>Import Dots: <input type=\"file\" ref={importJsonRef} style={{width: 180}} id=\"importJSON\" name=\"import\" accept=\"application/json\" onChange={importDots} ></input></p>\n                      </div>\n                    </div>\n                  )\n                }else{\n                  return(<div className=\"drop_zone\" onDrop={dropHandler} onDragEnd={onDragEndHandler} onDragEnter={onDragEnterHandler} onDragOver={e => handleDragOver(e)}>\n                            <p>Select or drag in an Image (pngs only)</p>\n                            <input type=\"file\" ref={uploadImageRef} style={{width: 180}} id=\"uploadImage\" name=\"import\" accept=\"image/png\" onChange={uploadImage} ></input> \n                        </div>)\n                }\n            }) ()}\n        </div>\n        \n    )\n}"],"mappings":"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"},"metadata":{},"sourceType":"module"}